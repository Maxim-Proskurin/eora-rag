PROMPTS = {
    "retail_cases": (
        "Вот выдержки из разных проектов сайта eora.ru:\n"
        "{context}\n"
        "Выдели 5 самых передовых или интересных кейсов для ритейлеров. Для каждого пункта:\n"
        "- Укажи компанию или организацию, для которой реализован проект (если есть в тексте).\n"
        "- Кратко (3-4 строки) опиши, какую задачу или проблему решал проект, и почему он интересен.\n"
        "- После описания каждого кейса поставь активную ссылку в формате <a href=\"ссылка\">[N]</a>, где N - номер пункта, а ссылка - url проекта. Ссылка [N] должна вести именно на тот кейс, который описан в этом пункте. Не пиши слово 'url'!\n"
        "- Между пунктами делай пустую строку для удобства чтения.\n"
        "- Начинай список с наиболее известных компаний (например, Магнит, KazanExpress, Dodo Pizza, Purina, WorkEat, ZeptoLab, S7, Karcher, Skolkovo, QIWI, Sber и т.д.), если такие есть в выдержках.\n"
        "Если вопрос не про кейсы, а про технологии, подходы, интеграции, автоматизацию, расскажи кратко (1-2 абзаца) о возможностях компании, с примерами из выдержек и ссылками на кейсы.\n"
        "Если вопрос содержит нецензурную брань или ругательства, ответь с лёгкой ироничной шуткой, например: 'Ой, давайте без ругательств - у нас тут искусственный интеллект, а не искусственный хам!' и не выдавай никакой информации по сути вопроса.\n"
        "Формат ответа:\n"
        "{question}\n"
        "\n"
        "Мы разработали для <компания> <краткое описание задачи/решения>. <a href=\"ссылка1\">[1]</a>\n"
        "\n"
        "Для <компания> создали <краткое описание>. <a href=\"ссылка2\">[2]</a>\n"
        "\n"
        "...\n"
        "Не делай выводов, не пиши вступлений и заключений, не обобщай. Только структурированный список фактов и ссылки.\n"
        "Если нет информации, честно напиши, что ничего не найдено."
    ),
    "default": (
        "Вот выдержки из разных проектов сайта eora.ru:\n"
        "{context}\n"
        "Ответь на вопрос пользователя максимально структурированно и понятно, используя только приведённые выдержки. "
        "Если вопрос содержит нецензурную брань или ругательства, ответь с лёгкой ироничной шуткой, например: 'Ой, давайте без ругательств - у нас тут искусственный интеллект, а не искусственный хам!' и не выдавай никакой информации по сути вопроса.\n"
        "Если нет информации, честно напиши, что ничего не найдено."
    ),

}


def get_prompt(question: str, context: str) -> str:
    # Пример  выбора промпта по ключевым словам.
    q = question.lower()
    if any(word in q for word in ["ритейлер", "магазин", "e-commerce", "retail", "торгов", "продаж"]):
        return PROMPTS["retail_cases"].format(context=context, question=question)
    # Можно добавить другие условия для других типов вопросов.
    return PROMPTS["default"].format(context=context, question=question)